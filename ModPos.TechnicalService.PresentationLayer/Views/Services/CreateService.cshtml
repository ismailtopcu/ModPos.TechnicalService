@model List<ResultCustomerDto>
@{
	ViewData["Title"] = "CreateService";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="card-title">
	<h4>Servis Oluşturma Sayfası</h4>
</div>
<div class="card-body">
	<div class="form-validation">
		<form class="form-valide" id="createServiceForm">
			<div class="form-group row">
				<label class="col-lg-4 col-form-label" for="val-email">
					Servis Kodu
				</label>
				<div class="col-lg-6">
					<input type="text" class="form-control" autocomplete="off" id="ServiceCode" placeholder="Servis kodu giriniz..">
				</div>
			</div>
			<div class="form-group row">
				<label class="col-lg-4 col-form-label" for="val-currency">
					Servis Numarası
				</label>
				<div class="col-lg-6">
					<input type="text" class="form-control" id="ServiceNumber" placeholder="Servis numarası giriniz..">
				</div>
			</div>
			<div class="form-group row">
				<label class="col-lg-4 col-form-label" for="val-currency">
					Müşteri
				</label>
				<div class="col-lg-6">
					<select class="form-control" id="CustomerIdSelect" name="CustomerId"></select>
				</div>
			</div>

			<div class="form-group row">
				<label class="col-lg-4 col-form-label" for="val-currency">
					Servis Açıklaması
				</label>
				<div class="col-lg-6">
					<input type="text" class="form-control" id="ServiceDescription" placeholder="Servis açıklaması giriniz..">
				</div>
			</div>


			<div class="form-group row">
				<div class="col-lg-8 ml-auto">
					<button class="btn btn-primary" id="btnSubmit">Kaydet</button>
				</div>
			</div>
		</form>
	</div>
</div>


<script>

	$(document).ready(function () {
		$("#btnSubmit").submit(function (e) {
			e.preventDefault();

			var ServiceCode = $("#ServiceCode").val();
			var ServiceNumber = $("#ServiceNumber").val();
			var CustomerId = $("#CustomerId").val();
			var ServiceDescription = $("#ServiceDescription").val();

			var putData = {
				CategoryName: newCategoryName, CategoryId: categoryId
			};

			$.ajax({
				url: "/Categories/UpdateCategoryData",
				type: "POST",
				dataType: "json",
				contentType: "application/json",
				data: JSON.stringify(putData),
				success: function (data) {
					window.location.href = "/Categories/CategoryList";
					
				},
				Error: function (error) {
					alert("Hata oluştu");
				}
			});
		});
	});
</script><script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
	$(document).ready(function () {
		$.ajax({
			type: "GET",
			url: "https://localhost:44301/api/Customers/GetAllCustomers",
			dataType: "json",
			success: function (customers) {
				var selectElement = $("#CustomerIdSelect");
				$.each(customers, function (index, customer) {
					selectElement.append($("<option>", {
						value: customer.customerId,
						text: customer.customerName + " " + customer.customerSurname
					}));
				});
			},
			error: function () {
				console.error("Müşteriler alınamadı.");
			}
		});
	});
</script>